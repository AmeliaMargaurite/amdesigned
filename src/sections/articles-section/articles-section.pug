mixin articles-section
	section.articles-section
		span#articles.section__content
			span
				h1 Recent articles
				p Informative articles for businesses with, or wanting, a website
				<?php if (isset($filter)) : ?>
					a(href="/articles") View all articles
				<?php endif ?>
			<?php if (count($articles) > 0) : ?>	
			span.articles__wrapper
				<?php foreach ($articles as $article): ?>
				<?php $webpFile = $article->hero_img_filename . '.webp'; ?>
					//- <?php $thumbnail = $img_path . 'thumbnail/' . $webpFile . ' 200w' ?>
					<?php $small = $img_path . 'large/' . $webpFile  . ' 425w' ?>
					<?php $medium = $img_path . 'medium/' . $webpFile . ' 900w' ?>
					//- <?php $large = $img_path . 'large/' . $webpFile . ' 1024w' ?>
					//- <?php $xLarge = $img_path . 'xLarge/' . $webpFile . ' 1440w' ?>
					<?php $srcset = array( $small, $medium) ?>
					<?php $srcset = implode(',', $srcset) ?>
					a.article__card(href!="/article/<?= $article->slug ?>")
						figure.image-w-placeholder
							img.placeholder-image(
								src!="<?= $img_path . 'thumbnail/' . $article->hero_img_filename ?>.jpg"
							)
							picture
								source(srcset!="<?= $srcset ?>", type="image/webp")
								img(
									src!="<?= $img_path . 'medium/' .  $article->hero_img_filename?>.jpg",
									alt!="<?= $article->hero_img_alt ?>"
								)
						span.content
							<?php $published_date = new DateTime($article->published_at)  ?>
							p.published_date!= "<?= $published_date->format('jS M y') ?>"
							p.title!= "<?= $article->title ?>"
							p.summary!= "<?= $article->summary ?>"
							ul.categories
								<?php if ($article->categories) :?>
									<?php foreach (json_decode($article->categories) as $category) : ?>
										li.category!= "<?= $category ?>"
									<?php endforeach ?>
								<?php endif ?>

				<?php endforeach ?>
				<?php else : ?>
				span
					p No articles found
					<?php endif ?>
